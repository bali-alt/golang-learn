## 并发介绍

### 进程和线程

```
1.进程是程序在操作系统中的一次执行过程，系统进行资源分配和调度的一个独立单位
2.线程是进程的一个执行实体，是CPU调度和分派的基本单位，它是比进程更小的能独立运行的基本单位
3.一个进程可以创建和撤销多个进程，同一个进程中多个线程可以并发执行
```

### 并发和并行

```
1.多线程程序在一个核的CPU上运行，就是并发
2.多线程程序在多个核的CPU上运行，就是并行
```

#### 并发

![image-20220219120237484](assets/image-20220219120237484.png)

#### 并行

![image-20220219120255846](assets/image-20220219120255846.png)

### 协程和线程

```
协程：独立的栈空间，共享堆空间，调用由用户自己控制，本质上优点类似于用户级线程，这些用户用户级线程的调度也是自己实现
线程：一个线程上可以跑多个协程，协程是轻量级的线程
```

### goroutine只是由官方实现的超级线程池

```
每个实例拥有 4-5k 的栈内存占用和由于实现机制而大幅减少的创建和销毁开销是go高并发的根本原因
```

### 并发不是并行

```
并发主要由切换时间片来实现”同时”运行，并行则是直接利用多核实现多线程的运行，go可以设置使用核数，以发挥多核计算机的能力
```

## goroutine 

> goroutine奉行通过通信来共享内存，而不是共享内存来通信
